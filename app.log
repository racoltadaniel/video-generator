2024-09-10 13:11:28,392 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-09-10 13:11:28,393 - DEBUG - load_verify_locations cafile='/home/dani/.local/lib/python3.11/site-packages/certifi/cacert.pem'
2024-09-10 13:11:28,447 - INFO - Generating script for topic: {"script":"I (36M) met my now ex (34F) a little over 2 years ago. During that time, the idea of her getting a boob job has come up a few times. She'd asked me I ever dated anyone with them and what I thought of them. I told her I had, I am not a fan at all and they are a deal breaker for me"}
2024-09-10 13:11:28,447 - DEBUG - Using selector: EpollSelector
2024-09-10 13:11:33,800 - DEBUG - Add segment 1 at step 27:
	<|transcribe|><|0.00|> Script Colin, I 36M, met my now ex, 34F, a little over two years ago.<|6.00|>
2024-09-10 13:11:35,026 - DEBUG - Add segment 2 at step 49:
	<|6.00|><|6.00|> During that time, the idea of her getting a boob job has come up a few times.<|11.00|>
2024-09-10 13:11:35,811 - DEBUG - Add segment 3 at step 68:
	<|11.00|><|11.00|> She'd asked me I ever dated anyone with them and what I thought of them.<|15.00|>
2024-09-10 13:11:36,658 - DEBUG - Add segment 4 at step 91:
	<|15.00|><|15.00|> I told her I had, I am not a fan at all and they are a deal breaker for me.<|20.00|>
2024-09-10 13:11:36,684 - DEBUG - Compile results
2024-09-10 13:11:36,690 - INFO - location to time {(0, 7): 0.44, (7, 14): 0.92, (14, 16): 1.24, (16, 21): 2.16, (21, 25): 2.44, (25, 28): 2.64, (28, 32): 2.82, (32, 36): 3.12, (36, 41): 4.02, (41, 43): 4.3, (43, 50): 4.52, (50, 55): 4.78, (55, 59): 5.04, (59, 65): 5.24, (65, 70): 5.52, (70, 77): 6.72, (77, 82): 6.92, (82, 88): 7.24, (88, 92): 7.54, (92, 97): 7.82, (97, 100): 8.06, (100, 104): 8.2, (104, 112): 8.4, (112, 114): 8.56, (114, 119): 8.8, (119, 123): 9.0, (123, 127): 9.24, (127, 132): 9.44, (132, 135): 9.6, (135, 137): 9.72, (137, 141): 9.92, (141, 148): 10.28, (148, 154): 11.68, (154, 160): 11.86, (160, 163): 12.06, (163, 165): 12.2, (165, 170): 12.42, (170, 176): 12.72, (176, 183): 13.12, (183, 188): 13.42, (188, 193): 13.62, (193, 197): 13.76, (197, 202): 13.94, (202, 204): 14.06, (204, 212): 14.28, (212, 215): 14.46, (215, 221): 14.64, (221, 223): 15.7, (223, 228): 15.94, (228, 232): 16.12, (232, 234): 16.26, (234, 239): 16.46, (239, 241): 16.74, (241, 244): 16.86, (244, 248): 17.02, (248, 250): 17.18, (250, 254): 17.34, (254, 257): 17.5, (257, 261): 17.74, (261, 265): 17.94, (265, 270): 18.08, (270, 274): 18.18, (274, 276): 18.26, (276, 281): 18.44, (281, 289): 18.74, (289, 293): 18.96, (293, 297): 19.16}
2024-09-10 13:11:36,708 - INFO - Timed captions generated: [((0, 2.82), 'Script Colin, I 36M, met my now'), ((2.82, 5.52), 'ex, 34F, a little over two years ago.'), ((5.52, 8.2), 'During that time, the idea of her'), ((8.2, 9.6), 'getting a boob job has come up'), ((9.6, 10.28), 'a few times.'), ((10.28, 13.12), "She'd asked me I ever dated anyone"), ((13.12, 14.64), 'with them and what I thought of them.'), ((14.64, 17.34), 'I told her I had, I am not a fan'), ((17.34, 19.16), 'at all and they are a deal breaker for me.')]
2024-09-10 13:11:36,713 - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': '# Instructions\n\nGiven the following video script and timed captions, extract three visually concrete and specific keywords for each time segment that can be used to search for background videos. The keywords should be short and capture the main essence of the sentence. They can be synonyms or related terms. If a caption is vague or general, consider the next timed caption for more context. If a keyword is a single word, try to return a two-word keyword that is visually concrete. If a time frame contains two or more important pieces of information, divide it into shorter time frames with one keyword each. Ensure that the time periods are strictly consecutive and cover the entire length of the video. Each keyword should cover between 2-4 seconds. The output should be in JSON format, like this: [[[t1, t2], ["keyword1", "keyword2", "keyword3"]], [[t2, t3], ["keyword4", "keyword5", "keyword6"]], ...]. Please handle all edge cases, such as overlapping time segments, vague or general captions, and single-word keywords.\n\nFor example, if the caption is \'The cheetah is the fastest land animal, capable of running at speeds up to 75 mph\', the keywords should include \'cheetah running\', \'fastest animal\', and \'75 mph\'. Similarly, for \'The Great Wall of China is one of the most iconic landmarks in the world\', the keywords should be \'Great Wall of China\', \'iconic landmark\', and \'China landmark\'.\n\nImportant Guidelines:\n\nUse only English in your text queries.\nEach search string must depict something visual.\nThe depictions have to be extremely visually concrete, like rainy street, or cat sleeping.\n\'emotional moment\' <= BAD, because it doesn\'t depict something visually.\n\'crying child\' <= GOOD, because it depicts something visual.\nThe list must always contain the most relevant and appropriate query searches.\n[\'Car\', \'Car driving\', \'Car racing\', \'Car parked\'] <= BAD, because it\'s 4 strings.\n[\'Fast car\'] <= GOOD, because it\'s 1 string.\n[\'Un chien\', \'une voiture rapide\', \'une maison rouge\'] <= BAD, because the text query is NOT in English.\n  '}, {'role': 'user', 'content': 'Script: {"script":"I (36M) met my now ex (34F) a little over 2 years ago. During that time, the idea of her getting a boob job has come up a few times. She\'d asked me I ever dated anyone with them and what I thought of them. I told her I had, I am not a fan at all and they are a deal breaker for me"}\nTimed Captions:((0, 2.82), \'Script Colin, I 36M, met my now\')((2.82, 5.52), \'ex, 34F, a little over two years ago.\')((5.52, 8.2), \'During that time, the idea of her\')((8.2, 9.6), \'getting a boob job has come up\')((9.6, 10.28), \'a few times.\')((10.28, 13.12), "She\'d asked me I ever dated anyone")((13.12, 14.64), \'with them and what I thought of them.\')((14.64, 17.34), \'I told her I had, I am not a fan\')((17.34, 19.16), \'at all and they are a deal breaker for me.\')\n'}], 'model': 'gpt-4o-mini', 'temperature': 1}}
2024-09-10 13:11:36,721 - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-09-10 13:11:36,721 - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-09-10 13:11:36,792 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f53a79deed0>
2024-09-10 13:11:36,792 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f53adec31d0> server_hostname='api.openai.com' timeout=5.0
2024-09-10 13:11:36,813 - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f53a79deb50>
2024-09-10 13:11:36,813 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-09-10 13:11:36,813 - DEBUG - send_request_headers.complete
2024-09-10 13:11:36,813 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-09-10 13:11:36,814 - DEBUG - send_request_body.complete
2024-09-10 13:11:36,814 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-09-10 13:11:39,854 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Tue, 10 Sep 2024 10:11:39 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-coogycxmxdecuft25r4ao3er'), (b'openai-processing-ms', b'2734'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=15552000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'200000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'199276'), (b'x-ratelimit-reset-requests', b'8.64s'), (b'x-ratelimit-reset-tokens', b'217ms'), (b'x-request-id', b'req_56ed08ba2717ccd7e08aa35a0c6398e6'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=6uPzwQ2vlY1OwvfqjwXwKd8x19LUotqrg3lQUHWlZKw-1725963099-1.0.1.1-d.XSZqIEvEbIHep1OEHsClo196eOkRMaphboCjzzTc97AH.wf9meBNQB0dpBnF4F_JIvTCAVEj5Frn7FXRvouw; path=/; expires=Tue, 10-Sep-24 10:41:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=2t_Y.OedR5RPXsGTdA_9Y8BgkNQKxr1hGVXdJkGpqDY-1725963099816-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8c0ea28b497670c9-OTP'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-09-10 13:11:39,857 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-09-10 13:11:39,857 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-09-10 13:11:39,858 - DEBUG - receive_response_body.complete
2024-09-10 13:11:39,858 - DEBUG - response_closed.started
2024-09-10 13:11:39,858 - DEBUG - response_closed.complete
2024-09-10 13:11:39,858 - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Tue, 10 Sep 2024 10:11:39 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-coogycxmxdecuft25r4ao3er'), ('openai-processing-ms', '2734'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=15552000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '200000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '199276'), ('x-ratelimit-reset-requests', '8.64s'), ('x-ratelimit-reset-tokens', '217ms'), ('x-request-id', 'req_56ed08ba2717ccd7e08aa35a0c6398e6'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=6uPzwQ2vlY1OwvfqjwXwKd8x19LUotqrg3lQUHWlZKw-1725963099-1.0.1.1-d.XSZqIEvEbIHep1OEHsClo196eOkRMaphboCjzzTc97AH.wf9meBNQB0dpBnF4F_JIvTCAVEj5Frn7FXRvouw; path=/; expires=Tue, 10-Sep-24 10:41:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=2t_Y.OedR5RPXsGTdA_9Y8BgkNQKxr1hGVXdJkGpqDY-1725963099816-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8c0ea28b497670c9-OTP'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-09-10 13:11:39,859 - DEBUG - request_id: req_56ed08ba2717ccd7e08aa35a0c6398e6
2024-09-10 13:11:39,867 - INFO - ChatGPT Text: ```json [ [[0, 2.82], ["man meeting", "relationship beginning", "introduction"]], [[2.82, 5.52], ["ex-girlfriend", "two years", "past relationship"]], [[5.52, 8.2], ["boob job", "surgery ideas", "body image"]], [[8.2, 9.6], ["boob job", "surgery discussion", "physical enhancement"]], [[9.6, 10.28], ["thoughts on surgery", "personal opinion", "relationship dynamics"]], [[10.28, 13.12], ["dating history", "asked questions", "relationship inquiries"]], [[13.12, 14.64], ["personal thoughts", "surgery preferences", "body modification"]], [[14.64, 17.34], ["not a fan", "negative opinion", "personal preference"]], [[17.34, 19.16], ["deal breaker", "relationship standards", "attraction issues"]] ] ```
2024-09-10 13:11:39,868 - ERROR - Expecting value: line 1 column 1 (char 0)
2024-09-10 13:11:39,868 - INFO - Search terms generated: [[[0, 2.82], ['man meeting', 'relationship beginning', 'introduction']], [[2.82, 5.52], ['ex-girlfriend', 'two years', 'past relationship']], [[5.52, 8.2], ['boob job', 'surgery ideas', 'body image']], [[8.2, 9.6], ['boob job', 'surgery discussion', 'physical enhancement']], [[9.6, 10.28], ['thoughts on surgery', 'personal opinion', 'relationship dynamics']], [[10.28, 13.12], ['dating history', 'asked questions', 'relationship inquiries']], [[13.12, 14.64], ['personal thoughts', 'surgery preferences', 'body modification']], [[14.64, 17.34], ['not a fan', 'negative opinion', 'personal preference']], [[17.34, 19.16], ['deal breaker', 'relationship standards', 'attraction issues']]]
2024-09-10 13:11:39,872 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:40,163 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=man+meeting&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:40,202 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:40,470 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=ex-girlfriend&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:40,507 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:40,777 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=boob+job&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:40,811 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:41,083 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=boob+job&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:41,099 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:41,391 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=thoughts+on+surgery&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:41,427 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:41,636 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=dating+history&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:41,677 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:41,902 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=personal+thoughts&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:41,918 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:42,134 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=not+a+fan&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:42,172 - DEBUG - Starting new HTTPS connection (1): api.pexels.com:443
2024-09-10 13:11:42,416 - DEBUG - https://api.pexels.com:443 "GET /videos/search?query=deal+breaker&orientation=portrait&per_page=15&size=medium HTTP/1.1" 200 None
2024-09-10 13:11:42,442 - INFO - Background videos generated: [[[0, 2.82], 'https://videos.pexels.com/video-files/6774385/6774385-hd_1080_1920_30fps.mp4'], [[2.82, 5.52], 'https://videos.pexels.com/video-files/4873454/4873454-hd_1080_1920_25fps.mp4'], [[5.52, 8.2], 'https://videos.pexels.com/video-files/8348724/8348724-hd_1080_1920_25fps.mp4'], [[8.2, 9.6], 'https://videos.pexels.com/video-files/7392790/7392790-hd_1080_1920_25fps.mp4'], [[9.6, 10.28], 'https://videos.pexels.com/video-files/7280522/7280522-hd_1080_1920_25fps.mp4'], [[10.28, 13.12], 'https://videos.pexels.com/video-files/6507526/6507526-hd_1080_1920_25fps.mp4'], [[13.12, 14.64], 'https://videos.pexels.com/video-files/7280525/7280525-hd_1080_1920_25fps.mp4'], [[14.64, 17.34], 'https://videos.pexels.com/video-files/12405630/12405630-hd_1080_1920_30fps.mp4'], [[17.34, 19.16], 'https://videos.pexels.com/video-files/6612302/6612302-hd_1080_1920_25fps.mp4']]
2024-09-10 13:11:42,446 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:42,543 - DEBUG - https://videos.pexels.com:443 "GET /video-files/6774385/6774385-hd_1080_1920_30fps.mp4 HTTP/1.1" 200 10880172
2024-09-10 13:11:44,592 - INFO - Created video /tmp/tmpge4g1f3m
2024-09-10 13:11:44,593 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:44,666 - DEBUG - https://videos.pexels.com:443 "GET /video-files/4873454/4873454-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 9323407
2024-09-10 13:11:46,368 - INFO - Created video /tmp/tmpwobjbzbz
2024-09-10 13:11:46,369 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:46,444 - DEBUG - https://videos.pexels.com:443 "GET /video-files/8348724/8348724-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 5634593
2024-09-10 13:11:47,617 - INFO - Created video /tmp/tmpi34odezt
2024-09-10 13:11:47,618 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:47,692 - DEBUG - https://videos.pexels.com:443 "GET /video-files/7392790/7392790-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 6141541
2024-09-10 13:11:48,949 - INFO - Created video /tmp/tmpfmw5g609
2024-09-10 13:11:48,950 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:49,030 - DEBUG - https://videos.pexels.com:443 "GET /video-files/7280522/7280522-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 4535961
2024-09-10 13:11:49,965 - INFO - Created video /tmp/tmpxpwqs86e
2024-09-10 13:11:49,967 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:50,051 - DEBUG - https://videos.pexels.com:443 "GET /video-files/6507526/6507526-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 6787156
2024-09-10 13:11:51,362 - INFO - Created video /tmp/tmp6jcgs7kc
2024-09-10 13:11:51,364 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:52,467 - DEBUG - https://videos.pexels.com:443 "GET /video-files/7280525/7280525-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 3679377
2024-09-10 13:11:54,845 - INFO - Created video /tmp/tmpcj85s61k
2024-09-10 13:11:54,846 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:54,918 - DEBUG - https://videos.pexels.com:443 "GET /video-files/12405630/12405630-hd_1080_1920_30fps.mp4 HTTP/1.1" 200 8933014
2024-09-10 13:11:56,563 - INFO - Created video /tmp/tmpzmohi4jr
2024-09-10 13:11:56,565 - DEBUG - Starting new HTTPS connection (1): videos.pexels.com:443
2024-09-10 13:11:56,651 - DEBUG - https://videos.pexels.com:443 "GET /video-files/6612302/6612302-hd_1080_1920_25fps.mp4 HTTP/1.1" 200 7784736
2024-09-10 13:11:58,098 - INFO - Created video /tmp/tmpqzae26rb
2024-09-10 13:12:44,784 - INFO - Video generation completed
2024-09-10 13:12:44,784 - INFO - Process completed for topic: t
